{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../node_modules/events/events.js","webpack:///../@here/harp-utils/lib/GroupedPriorityList.ts","webpack:///../@here/harp-utils/lib/Logger/ConsoleChannel.ts","webpack:///../@here/harp-utils/lib/Logger/ILogger.ts","webpack:///../@here/harp-utils/lib/Logger/Logger.ts","webpack:///../@here/harp-utils/lib/Logger/WorkerChannel.ts","webpack:///../@here/harp-utils/lib/Logger/LoggerManagerImpl.ts","webpack:///../@here/harp-utils/lib/Logger/LoggerManager.ts","webpack:///../@here/harp-utils/lib/Math2D.ts","webpack:///../@here/harp-utils/lib/MathUtils.ts","webpack:///../@here/harp-utils/lib/Mixins.ts","webpack:///../@here/harp-utils/lib/assert.ts","webpack:///../@here/harp-utils/lib/ContextLogger.ts","webpack:///../@here/harp-utils/lib/PerformanceTimer.ts","webpack:///../@here/harp-utils/lib/ObjectUtils.ts","webpack:///../@here/harp-utils/lib/OptionsUtils.ts","webpack:///../@here/harp-utils/lib/UrlUtils.ts","webpack:///../@here/harp-utils/lib/UriResolver.ts","webpack:///../@here/harp-utils/lib/UrlPlatformUtils.web.ts","webpack:///../@here/harp-utils/lib/Functions.ts","webpack:///../@here/harp-utils/index.ts","webpack:///./index.ts","webpack:///./WorkerMapViewFacade.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","3","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","self","this","oldJsonpFunction","slice","s","ReflectOwnKeys","R","Reflect","ReflectApply","apply","receiver","args","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","$getMaxListeners","that","_addListener","listener","prepend","events","existing","warning","TypeError","newListener","emit","unshift","warned","w","String","emitter","count","warn","onceWrapper","arguments","fired","removeListener","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","arr","ret","Array","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","handler","len","listeners","addListener","on","prependListener","once","prependOnceListener","list","position","originalListener","index","pop","spliceOne","off","removeAllListeners","keys","rawListeners","eventNames","PriorityListGroup","priority","elements","GroupedPriorityList","groups","Map","element","getGroup","group","foundIndex","indexOf","splice","normalizedPriority","Math","floor","delete","m_sortedGroups","clear","other","otherGroup","findGroup","clone","priorityList","sort","a","b","fun","forEach","ConsoleChannel","optionalParams","debug","info","log","trace","LogLevel","m_channel","options","enabled","level","Trace","update","prefix","Debug","Info","Log","Warn","WORKERCHANNEL_MSG_TYPE","workerMessage","postMessage","m_loggers","channel","map","logger","find","loggerName","m_levelSetForAll","found","config","m_instance","Math2D","MathUtils","applyMixinsWithoutProperties","derivedCtor","baseCtors","baseCtor","descriptor","getOwnPropertyDescriptor","distSquared","ax","ay","bx","by","Box","x","y","h","computeSquaredLineLength","line","squaredLineLength","xDiff","yDiff","distToSegmentSquared","px","py","l0x","l0y","l1x","l1y","lineLengthSuared","max","min","clamp","lerp","edge0","edge1","factor","smoothStep","smootherStep","val","inMin","inMax","outMin","outMax","min2","result","max2","isClamped","lowerBound","upperBound","easeInOutCubic","startValue","endValue","time","isProduction","assert","condition","assertExists","ContextLogger","m_logger","headerMessage","m_headerLogged","createLogMethod","severity","rest","join","PerformanceTimer","nowFunc","performance","now","Date","getTime","cloneDeep","obj","cache","cloneInternal","cached","isArray","RegExp","source","flags","constructor","getOptionValue","values","candidate","resolveReferenceUri","parentUri","childUri","absoluteUrlWithOriginRe","test","startsWith","getUrlOrigin","substr","baseUrl","instance","getNowFunc","url","idx","lastIndexOf","substring","parsed","urlOriginRe","match","protocol","host","getUrlHostAndProtocol","uri","composeUriResolvers","resolvers","resolveUri","originalUrl","reduce","resolver","getAppBaseUrl","window","appBaseUrl","location","href","setAppBaseUrl","v","chainCallbacks","f1","f2","s3Base","querySelector","getElementById","innerText","getFullYear","releases","date","hash","version","dropdown","async","createMapInt","canvas","transferControlToOffscreen","offscreen","worker","Worker","addEventListener","clientHeight","clientWidth","pixelRatio","devicePixelRatio","eventHandler","eventName","width","height","geoPos","distance","tiltDeg","headingDeg","lat","latitude","long","longitude","createMapViewInWorker","then","createMap","fetch","res","json","release","option","onchange","selected","catch","theCanvas","resize","innerWidth","style","opacity","main"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t3: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"0\":\"mapview-main\"}[chunkId]||chunkId) + \"-chunk.bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = (self || this)[\"webpackJsonp\"] = (self || this)[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 52);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction $getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return $getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = $getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  var args = [];\n  for (var i = 0; i < arguments.length; i++) args.push(arguments[i]);\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    ReflectApply(this.listener, this.target, args);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      if (typeof listener !== 'function') {\n        throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n      }\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * A `PriorityListElement` has a priority to assist in sorting. The idea is that the items in a\n * grouped priority list will not modify their priority during processing to such an amount, that\n * they will change into another group. Smaller lists are smaller to sort, and in case of resource\n * limitation (maximum number of rendered objects reached), not all items have to be sorted at all.\n */\nexport interface PriorityListElement {\n    /**\n     * The integer value of this priority is used to group objects of \"same\" priority.\n     */\n    priority: number;\n}\n\n/**\n * The `PriorityListGroup` contains a list of [[PriorityListElement]]s that all have the same\n * (integer) priority.\n */\nexport class PriorityListGroup<T extends PriorityListElement> {\n    constructor(readonly priority: number, public elements: T[] = new Array()) {}\n\n    /**\n     * Create and return a deep copy of the `PriorityListGroup<T>`.\n     *\n     * @returns A clone of the `PriorityListGroup<T>`.\n     */\n    clone(): PriorityListGroup<T> {\n        return new PriorityListGroup<T>(this.priority, this.elements.slice());\n    }\n}\n\n/**\n * The `PriorityListGroupMap` is a map to map the (integer) priority to a [[PriorityListGroup]].\n */\nexport type PriorityListGroupMap<T extends PriorityListElement> = Map<number, PriorityListGroup<T>>;\n\n/**\n * The `GroupedPriorityList` contains a [[PriorityListGroupMap]] to manage a larger number of items\n * in priority groups.\n */\nexport class GroupedPriorityList<T extends PriorityListElement> {\n    readonly groups: PriorityListGroupMap<T> = new Map();\n    private m_sortedGroups: Array<PriorityListGroup<T>> | undefined;\n    /**\n     * Add an element to the `GroupedPriorityList`. Selects group based on the elements priority.\n     *\n     * @param element Element to be added.\n     */\n    add(element: T): void {\n        this.getGroup(element.priority).elements.push(element);\n    }\n\n    /**\n     * Remove an element from the `GroupedPriorityList`.\n     *\n     * Note: It is required that the priority is the same as it was when the element has been added.\n     * Otherwise, the removal will fail.\n     *\n     * @param element Element to be removed.\n     * @returns `True` if the element was removed, `false` otherwise.\n     */\n    remove(element: T): boolean {\n        const group = this.getGroup(element.priority);\n        if (group !== undefined) {\n            const foundIndex = group.elements.indexOf(element);\n            if (foundIndex >= 0) {\n                group.elements.splice(foundIndex, 1);\n                if (group.elements.length === 0) {\n                    const normalizedPriority = Math.floor(element.priority);\n                    this.groups.delete(normalizedPriority);\n                    if (this.m_sortedGroups) {\n                        this.m_sortedGroups = [];\n                    }\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Remove all internal [[PriorityListGroup]]s.\n     */\n    clear(): void {\n        this.groups.clear();\n        if (this.m_sortedGroups) {\n            this.m_sortedGroups = [];\n        }\n    }\n\n    /**\n     * Merge another [[GroupedPriorityList]] into this one.\n     *\n     * @param other Other group to merge.\n     */\n    merge(other: GroupedPriorityList<T>): GroupedPriorityList<T> {\n        for (const otherGroup of other.groups) {\n            const group = this.findGroup(otherGroup[1].priority);\n            if (group === undefined) {\n                this.groups.set(Math.floor(otherGroup[1].priority), otherGroup[1].clone());\n                if (this.m_sortedGroups) {\n                    this.m_sortedGroups = [];\n                }\n                continue;\n            }\n            group.elements = group.elements.concat(otherGroup[1].elements);\n        }\n        return this;\n    }\n\n    /**\n     * Return a sorted list of [[PriorityListGroup]]s.\n     */\n    get sortedGroups(): Array<PriorityListGroup<T>> {\n        if (this.m_sortedGroups && this.m_sortedGroups.length > 0) {\n            return this.m_sortedGroups;\n        }\n\n        if (!this.m_sortedGroups) {\n            this.m_sortedGroups = [];\n        }\n        for (const priorityList of this.groups) {\n            this.m_sortedGroups.push(priorityList[1]);\n        }\n\n        this.m_sortedGroups.sort((a: PriorityListGroup<T>, b: PriorityListGroup<T>) => {\n            return b.priority - a.priority;\n        });\n        return this.m_sortedGroups;\n    }\n\n    /**\n     * Apply function to all elements in this `GroupedPriorityList`.\n     *\n     * @param {(element: T) => void} fun Function to apply.\n     */\n    forEach(fun: (element: T) => void): void {\n        for (const group of this.groups) {\n            group[1].elements.forEach(fun);\n        }\n    }\n\n    /**\n     * Count the number of elements in this `GroupedPriorityList`.\n     */\n    count(): number {\n        let n = 0;\n        for (const group of this.groups) {\n            n += group[1].elements.length;\n        }\n        return n;\n    }\n\n    /**\n     * Get group of elements that have the same (integer) priority.\n     *\n     * @param priority The priority to retrieve all elements from.\n     */\n    private findGroup(priority: number): PriorityListGroup<T> | undefined {\n        const normalizedPriority = Math.floor(priority);\n        const group = this.groups.get(normalizedPriority);\n        return group;\n    }\n\n    /**\n     * Get group of elements that have the same (integer) priority.\n     *\n     * @param priority The priority to retrieve all elements from.\n     */\n    private getGroup(priority: number): PriorityListGroup<T> {\n        let group = this.findGroup(priority);\n\n        if (group === undefined) {\n            const normalizedPriority = Math.floor(priority);\n            group = new PriorityListGroup<T>(normalizedPriority);\n            this.groups.set(normalizedPriority, group);\n            if (this.m_sortedGroups) {\n                this.m_sortedGroups = [];\n            }\n        }\n\n        return group;\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IChannel } from \"./IChannel\";\n\n/**\n * Class for the default console channel.\n */\n\nexport class ConsoleChannel implements IChannel {\n    error(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.error(message, ...optionalParams);\n    }\n\n    debug(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.debug(message, ...optionalParams);\n    }\n\n    info(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.info(message, ...optionalParams);\n    }\n\n    log(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.log(message, ...optionalParams);\n    }\n\n    trace(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.trace(message, ...optionalParams);\n    }\n\n    warn(message?: any, ...optionalParams: any[]) {\n        // tslint:disable-next-line:no-console\n        console.warn(message, ...optionalParams);\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IChannel } from \"./IChannel\";\n\n/**\n * Enum log levels\n */\nexport enum LogLevel {\n    Trace,\n    Debug,\n    Log,\n    Info,\n    Warn,\n    Error\n}\n\n/**\n * Logger options to configure logger\n */\nexport class LoggerOptions {\n    enabled?: boolean;\n    level?: LogLevel;\n}\n\n/**\n * Public interface for Logger class.\n */\nexport interface ILogger extends IChannel {\n    readonly name: string;\n\n    enabled: boolean;\n\n    level: LogLevel;\n\n    /**\n     * Update logger options\n     *\n     * @param  {LoggerOptions} options Set logger options and configure internal logger.\n     */\n    update(options: LoggerOptions): void;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IChannel } from \"./IChannel\";\nimport { ILogger, LoggerOptions, LogLevel } from \"./ILogger\";\n\n/**\n * Logger class.\n */\nexport class Logger implements ILogger {\n    enabled: boolean = true;\n    level: LogLevel = LogLevel.Trace;\n\n    constructor(readonly name: string, private m_channel: IChannel, options?: LoggerOptions) {\n        if (options !== undefined) {\n            this.update(options);\n        }\n    }\n\n    error(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Error) {\n            this.m_channel.error(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    debug(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Debug) {\n            this.m_channel.debug(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    info(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Info) {\n            this.m_channel.info(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    log(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Log) {\n            this.m_channel.log(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    trace(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Trace) {\n            this.m_channel.trace(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    warn(message?: any, ...optionalParams: any[]) {\n        if (this.enabled && this.level <= LogLevel.Warn) {\n            this.m_channel.warn(this.prefix, message, ...optionalParams);\n        }\n    }\n\n    update(options: LoggerOptions) {\n        this.enabled = options.enabled === undefined ? this.enabled : options.enabled;\n        this.level = options.level === undefined ? this.level : options.level;\n    }\n\n    private get prefix(): string {\n        return this.name + \":\";\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { IChannel } from \"./IChannel\";\nimport { LogLevel } from \"./ILogger\";\n\ndeclare let self: Worker;\n\nexport const WORKERCHANNEL_MSG_TYPE = \"worker-channel-message\";\n\n/**\n * The interface for the messages of the WorkerChannel.\n */\nexport interface IWorkerChannelMessage {\n    message: any[];\n    type: \"worker-channel-message\";\n    level: LogLevel;\n}\n\n/**\n * The class for the worker channel.\n */\nexport class WorkerChannel implements IChannel {\n    error(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Error\n        };\n        self.postMessage(workerMessage);\n    }\n\n    debug(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Debug\n        };\n        self.postMessage(workerMessage);\n    }\n\n    info(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Info\n        };\n        self.postMessage(workerMessage);\n    }\n\n    log(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Log\n        };\n        self.postMessage(workerMessage);\n    }\n\n    trace(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Trace\n        };\n        self.postMessage(workerMessage);\n    }\n\n    warn(message?: any, ...optionalParams: any[]) {\n        const workerMessage: IWorkerChannelMessage = {\n            message: [message, ...optionalParams],\n            type: WORKERCHANNEL_MSG_TYPE,\n            level: LogLevel.Warn\n        };\n        self.postMessage(workerMessage);\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ConsoleChannel } from \"./ConsoleChannel\";\nimport { IChannel } from \"./IChannel\";\nimport { ILogger, LoggerOptions, LogLevel } from \"./ILogger\";\nimport { ILoggerManager } from \"./ILoggerManager\";\nimport { Logger } from \"./Logger\";\nimport { WorkerChannel } from \"./WorkerChannel\";\n\n/**\n * LoggerManagerImpl is the class for the singleton instance of the logger manager.\n * It handles channels and loggers.\n */\n\nexport class LoggerManagerImpl implements ILoggerManager {\n    channel: IChannel;\n    private readonly m_loggers: ILogger[] = [];\n    private m_levelSetForAll?: LogLevel;\n\n    constructor() {\n        this.channel =\n            typeof self === \"undefined\" || typeof self.document !== \"undefined\"\n                ? new ConsoleChannel()\n                : new WorkerChannel();\n    }\n\n    getLoggerNames(): string[] {\n        return this.m_loggers.map(logger => logger.name);\n    }\n\n    getLogger(name: string): ILogger | undefined {\n        return this.m_loggers.find(logger => logger.name === name);\n    }\n\n    create(loggerName: string, options: LoggerOptions = {}): ILogger {\n        if (\n            this.m_levelSetForAll !== undefined &&\n            (options.level === undefined || options.level < this.m_levelSetForAll)\n        ) {\n            options.level = this.m_levelSetForAll;\n        }\n        const logger = new Logger(loggerName, this.channel, options);\n        this.m_loggers.push(logger);\n        return logger;\n    }\n\n    dispose(logger: ILogger) {\n        const found = this.m_loggers.indexOf(logger);\n        if (found < 0) {\n            throw new Error(`Cannot unregister \"${logger}\" : no such logger registered.`);\n        }\n        this.m_loggers.splice(found, 1);\n    }\n\n    updateAll(options: LoggerOptions) {\n        for (const logger of this.m_loggers) {\n            logger.update(options);\n        }\n    }\n\n    update(loggerName: string, config: LoggerOptions) {\n        for (const logger of this.m_loggers) {\n            if (logger.name === loggerName) {\n                logger.update(config);\n            }\n        }\n    }\n\n    enableAll(enabled: boolean) {\n        for (const logger of this.m_loggers) {\n            logger.enabled = enabled;\n        }\n    }\n\n    enable(loggerName: string, value: boolean) {\n        this.update(loggerName, { enabled: value });\n    }\n\n    setLogLevelForAll(level: LogLevel) {\n        this.m_levelSetForAll = level;\n        for (const logger of this.m_loggers) {\n            logger.level = level;\n        }\n    }\n\n    setLogLevel(loggerName: string, level: LogLevel) {\n        this.update(loggerName, { level });\n    }\n\n    setChannel(channel: IChannel) {\n        this.channel = channel;\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { ILoggerManager } from \"./ILoggerManager\";\nimport { LoggerManagerImpl } from \"./LoggerManagerImpl\";\n\n/**\n * The LoggerManager class implements a singleton object that handles logging.\n *\n * Example:\n *\n * ```typescript\n *\n * const logger = LoggerManager.instance.create(\"MyFontLoaderClass\");\n * if (missingFonts.length > 0) {\n *     logger.error(\"These fonts can not be loaded: \", missingFonts);\n * } else {\n *     logger.log(\"All fonts have been loaded.\");\n * }\n * ```\n */\nexport class LoggerManager {\n    private static m_instance: ILoggerManager;\n\n    static get instance(): ILoggerManager {\n        return this.m_instance || (this.m_instance = new LoggerManagerImpl());\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport namespace Math2D {\n    /**\n     * Alternative 2D box object with less memory impact (four numbers instead of two min/max\n     * objects with two numbers each). Should be faster.\n     */\n    export class Box {\n        /**\n         * Alternative 2D box object with less memory impact (four numbers instead of two min/max\n         * objects with two numbers each). Should be faster.\n         *\n         * @param x New X value.\n         * @param y New y value.\n         * @param w New w value.\n         * @param h New h value.\n         */\n        constructor(public x = 0, public y = 0, public w = 0, public h = 0) {}\n\n        /**\n         * Set new values to all properties of the box.\n         *\n         * @param x New X value.\n         * @param y New y value.\n         * @param w New w value.\n         * @param h New h value.\n         */\n        set(x: number, y: number, w: number, h: number) {\n            this.x = x;\n            this.y = y;\n            this.w = w;\n            this.h = h;\n        }\n\n        /**\n         * Test box for inclusion of point.\n         *\n         * @param x X coordinate of point.\n         * @param y Y coordinate of point.\n         */\n        contains(x: number, y: number): boolean {\n            return this.x <= x && this.x + this.w >= x && this.y <= y && this.y + this.h >= y;\n        }\n\n        /**\n         * Test two boxes for intersection.\n         *\n         * @param other Box 2 to test for intersection.\n         */\n        intersects(other: Box): boolean {\n            return (\n                this.x <= other.x + other.w &&\n                this.x + this.w >= other.x &&\n                this.y <= other.y + other.h &&\n                this.y + this.h >= other.y\n            );\n        }\n    }\n\n    /**\n     * Box to store UV coordinates.\n     */\n    export interface UvBox {\n        s0: number;\n        t0: number;\n        s1: number;\n        t1: number;\n    }\n\n    /**\n     * Compute squared distance between two 2D points `a` and `b`.\n     *\n     * @param ax Point a.x\n     * @param ay Point a.y\n     * @param bx Point b.x\n     * @param by Point b.y\n     * @returns Squared distance between the two points\n     */\n    export function distSquared(ax: number, ay: number, bx: number, by: number): number {\n        return (ax - bx) * (ax - bx) + (ay - by) * (ay - by);\n    }\n\n    /**\n     * Computes the squared length of a line.\n     *\n     * @param line An array of that forms a line via [x,y,z,x,y,z,...] tuples.\n     */\n    export function computeSquaredLineLength(line: number[]): number {\n        let squaredLineLength: number = 0;\n\n        const length = line.length - 4;\n        for (let i = 0; i < length; i += 3) {\n            const xDiff = line[i + 3] - line[i];\n            const yDiff = line[i + 4] - line[i + 1];\n            squaredLineLength += xDiff * xDiff + yDiff * yDiff;\n        }\n        return squaredLineLength;\n    }\n\n    /**\n     * Compute squared distance between a 2D point and a 2D line segment.\n     *\n     * @param px Test point X\n     * @param py Test point y\n     * @param l0x Line segment start X\n     * @param l0y Line segment start Y\n     * @param l1x Line segment end X\n     * @param l1y Line segment end Y\n     * @returns Squared distance between point and line segment\n     */\n    export function distToSegmentSquared(\n        px: number,\n        py: number,\n        l0x: number,\n        l0y: number,\n        l1x: number,\n        l1y: number\n    ): number {\n        const lineLengthSuared = distSquared(l0x, l0y, l1x, l1y);\n        if (lineLengthSuared === 0) {\n            return distSquared(px, py, l0x, l0y);\n        }\n        let t = ((px - l0x) * (l1x - l0x) + (py - l0y) * (l1y - l0y)) / lineLengthSuared;\n        t = Math.max(0, Math.min(1, t));\n        return distSquared(px, py, l0x + t * (l1x - l0x), l0y + t * (l1y - l0y));\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport namespace MathUtils {\n    /**\n     * Ensures that input value fits in a given range.\n     *\n     * @param value The value to be clamped.\n     * @param min Minimum value.\n     * @param max Maximum value.\n     *\n     * @returns Clamped value.\n     */\n    export function clamp(value: number, min: number, max: number): number {\n        return value < min ? min : value > max ? max : value;\n    }\n\n    /**\n     * Returns a linear interpolation between the values of edge0 and edge1 based on the factor.\n     *\n     * Given two known points the linear interpolant between these points may be presented as\n     * straight line. This means that for given factor change the resulting change of return\n     * value is always const.\n     * @see https://en.wikipedia.org/wiki/Linear_interpolation\n     *\n     * @param edge0\n     * @param edge1\n     * @param factor Interpolation factor that ranges between: 0 <= x <= 1.\n     */\n    export function lerp(edge0: number, edge1: number, factor: number): number {\n        return edge0 * (1 - factor) + edge1 * factor;\n    }\n\n    /**\n     * Returns a smooth interpolation between the values edge0 and edge1 based on the interpolation\n     * factor x. `0 <= x <= 1`.\n     * @see https://en.wikipedia.org/wiki/Smoothstep\n     *\n     * @param edge0\n     * @param edge1\n     * @param x\n     */\n    export function smoothStep(edge0: number, edge1: number, x: number) {\n        // Scale, bias and saturate x to 0..1 range\n        x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n        // Evaluate polynomial\n        return x * x * (3 - 2 * x);\n    }\n\n    /**\n     * Returns a smooth interpolation between the values edge0 and edge1 based on the interpolation\n     * factor x. `0 <= x <= 1`.\n     *\n     * Improved version by Ken Perlin, which has zero 1st- and 2nd-order derivatives at `x = 0` and\n     * `x = 1`:\n     *\n     * @see https://en.wikipedia.org/wiki/Smoothstep\n     *\n     * @param edge0\n     * @param edge1\n     * @param x\n     */\n    export function smootherStep(edge0: number, edge1: number, x: number) {\n        // Scale, and clamp x to 0..1 range\n        x = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n        // Evaluate polynomial\n        return x * x * x * (x * (x * 6 - 15) + 10);\n    }\n\n    /**\n     * Maps a number from one range to another.\n     *\n     * @param val The incoming value to be converted.\n     * @param inMin Lower bound of the value's current range.\n     * @param inMax Upper bound of the value's current range.\n     * @param outMin Lower bound of the value's target range.\n     * @param outMax Upper bound of the value's target range.\n     */\n    export function map(val: number, inMin: number, inMax: number, outMin: number, outMax: number) {\n        return ((val - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n    }\n\n    /**\n     * Returns the smaller of the two given numbers. Both numbers may be undefined, in which case\n     * the result is undefined. If only one of the numbers is undefined, the other number is\n     * returned.\n     *\n     * @param a First number.\n     * @param b Second number.\n     */\n    export function min2(a: number | undefined, b: number | undefined): number | undefined {\n        let result: number | undefined;\n\n        if (a !== undefined) {\n            result = a;\n        }\n        if (b !== undefined) {\n            result = result === undefined ? b : Math.min(result, b);\n        }\n\n        return result;\n    }\n\n    /**\n     * Returns the larger of the two given numbers. Both numbers may be undefined, in which case\n     * the result is undefined. If only one of the numbers is undefined, the other number is\n     * returned.\n     *\n     * @param a First number.\n     * @param b Second number.\n     */\n    export function max2(a: number | undefined, b: number | undefined): number | undefined {\n        let result: number | undefined;\n\n        if (a !== undefined) {\n            result = a;\n        }\n        if (b !== undefined) {\n            result = result === undefined ? b : Math.max(result, b);\n        }\n\n        return result;\n    }\n\n    /**\n     * Checks if the value of a given number is inside an upper or lower bound. The bounds may be\n     * undefined, in which case their value is ignored.\n     *\n     * @param value Value to check.\n     * @param lowerBound The lower bound to check the value against.\n     * @param upperBound The upper bound to check the value against.\n     *\n     * @returns `true` if value is inside the bounds or if the bounds are `undefined`, `false`\n     *          otherwise.\n     */\n    export function isClamped(\n        value: number,\n        lowerBound: number | undefined,\n        upperBound: number | undefined\n    ): boolean {\n        if (lowerBound !== undefined && value < lowerBound) {\n            return false;\n        }\n        if (upperBound !== undefined && value > upperBound) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Smoothly interpolates between two values using cubic formula\n     *\n     * @param startValue\n     * @param endValue\n     * @param time\n     * @returns Result of the interpolation within the range of `[startValue, endValue]`\n     */\n    export function easeInOutCubic(startValue: number, endValue: number, time: number): number {\n        const timeValue =\n            time < 0.5 ? 4 * time * time * time : (time - 1) * (2 * time - 2) * (2 * time - 2) + 1;\n        return startValue + (endValue - startValue) * timeValue;\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Copy methods and properties from one prototype into another.\n *\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n *\n * @param derivedCtor Class to mix methods and properties into.\n * @param baseCtors Class to take all methods and properties from.\n */\nexport function applyMixins(derivedCtor: any, baseCtors: any[]) {\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            derivedCtor.prototype[name] = baseCtor.prototype[name];\n        });\n    });\n}\n\n/**\n * Copy methods from one prototype into another.\n *\n * @see https://www.typescriptlang.org/docs/handbook/mixins.html\n *\n * @param derivedCtor Class to mix methods into.\n * @param baseCtors Class to take all methods from.\n */\nexport function applyMixinsWithoutProperties(derivedCtor: any, baseCtors: any[]) {\n    baseCtors.forEach(baseCtor => {\n        Object.getOwnPropertyNames(baseCtor.prototype).forEach(name => {\n            const descriptor = Object.getOwnPropertyDescriptor(baseCtor.prototype, name);\n            if (descriptor !== undefined && descriptor.get === undefined) {\n                derivedCtor.prototype[name] = baseCtor.prototype[name];\n            }\n        });\n    });\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\ndeclare const process: any;\n\n// cache value, because access to process.env.NODE_ENV is SLOW!\nconst isProduction = process.env.NODE_ENV === \"production\";\n\n//TODO: Make assertHandler configurable\n\n/**\n * Implementation of assert as a development help\n *\n * Note - this is deliberately a global function so that minimizers remove the\n * entire call when building for production.\n *\n * @hidden\n * @param condition Condition to match, if false, throws an Error(message)\n * @param message Optional message, defaults to \"ASSERTION failed\"\n */\nexport function assert(condition: boolean, message?: string): void {\n    if (!isProduction) {\n        if (!condition) {\n            throw new Error(message !== undefined ? message : \"ASSERTION failed\");\n        }\n    }\n}\n\nexport function assertExists<T>(element: T | undefined, message?: string): T {\n    if (!isProduction) {\n        if (element === undefined || element === null) {\n            throw new Error(\n                message !== undefined ? message : \"ASSERTION failed: Element is undefined or null\"\n            );\n        }\n    }\n    return element!;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Refinement of `console` interface only for important information i.e `info`, `warn` and `errors`.\n */\nexport interface ISimpleChannel {\n    info(message?: any, ...optionalParams: any[]): void;\n    warn(message?: any, ...optionalParams: any[]): void;\n    error(message?: any, ...optionalParams: any[]): void;\n}\n\n/**\n * Extension of [[ISimpleChannel]] to support contextual logging by adding stack of prefixes.\n */\nexport interface IContextLogger extends ISimpleChannel {\n    /**\n     * Push \"attribute-like\" context.\n     */\n    pushAttr(name: string): void;\n\n    /**\n     * Push \"index-like\" context.\n     *\n     * Following log messages will be prefixed with `[index]`.\n     */\n    pushIndex(index: string | number): void;\n\n    /**\n     * Remove current context from top of stack.\n     */\n    pop(): void;\n}\n\n/**\n * Context-aware logger that decorates log message with stack-based prefix, emits `headerMessage`\n * before first actual log message.\n */\nexport class ContextLogger implements IContextLogger {\n    private readonly context: string[] = [];\n    private m_headerLogged = false;\n\n    /**\n     * Construct a context-aware logger that logs to `m_logger`.\n     */\n    constructor(readonly m_logger: ISimpleChannel, readonly headerMessage: string) {}\n\n    /**\n     * Push \"attribute-like\" context.\n     *\n     * Following log messages will be prefixed with `name` or `.name` depending on current context.\n     */\n    pushAttr(name: string) {\n        this.context.push(`${this.context.length > 0 ? \".\" : \"\"}${name}`);\n    }\n\n    /**\n     * Push \"index-like\" context.\n     *\n     * Following log messages will be prefixed with `[index]`.\n     */\n    pushIndex(index: string | number) {\n        this.context.push(`[${index}]`);\n    }\n\n    pop() {\n        this.context.pop();\n    }\n\n    // They, are public member functions it's just tslint who doesn't understand this.\n\n    // tslint:disable:member-ordering\n    warn = this.createLogMethod(\"warn\");\n    info = this.createLogMethod(\"info\");\n    error = this.createLogMethod(\"error\");\n    // tslint:enable:member-ordering\n\n    private createLogMethod(severity: \"warn\" | \"info\" | \"error\") {\n        return (message: string, ...rest: any[]) => {\n            if (!this.m_headerLogged) {\n                this.m_logger.info(this.headerMessage);\n                this.m_headerLogged = true;\n            }\n            this.m_logger[severity](`${this.context.join(\"\")}: ${message}`, ...rest);\n        };\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/* tslint:disable:max-line-length */\n/**\n * See:\n * https://developers.google.com/web/updates/2012/08/When-milliseconds-are-not-enough-performance-now\n */\n/* tslint:ensable:max-line-length */\n\nexport class PerformanceTimer {\n    /**\n     * Returns timestamp in milliseconds since page load.\n     *\n     * If the [[DOMHighResTimeStamp]] is supported, the resolution is up to 5 microseconds,\n     * otherwise it is in milliseconds. Timespans are computed by taking the difference between two\n     * samples.\n     *\n     * Example:\n     * ```typescript\n     * const now = PerformanceTimer.now();\n     * // call some expensive function for which you want to check the duration.\n     * const end = PerformanceTimer.now();\n     * const elapsedTime = end - now;\n     * ```\n     */\n    static now(): number {\n        return PerformanceTimer.nowFunc();\n    }\n\n    // tslint:disable-next-line:no-unused-variable\n    private static readonly instance = new PerformanceTimer();\n\n    private static readonly nowFunc: () => number = PerformanceTimer.getNowFunc();\n\n    private static getNowFunc() {\n        if (typeof performance !== \"undefined\" && typeof performance.now !== \"undefined\") {\n            return () => performance.now();\n        }\n\n        // fall back to Date.getTime()\n        return () => {\n            return new Date().getTime();\n        };\n    }\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Deep clone of object.\n *\n * Like `JSON.parse(JSON.stringify(obj))`, but supports basic javascript types (string, number,\n * object), `Date` and `RegExp`s and cycles.\n *\n * Throws error if enounters object with `prototype` assuming that in general class instances\n * cannot be reliably cloned by generic algorithm.\n */\nexport function cloneDeep<T>(obj: T): T {\n    const cache: Map<object, object> = new Map();\n    function cloneInternal(src: any): any {\n        if (src === null) {\n            return null;\n        } else if (typeof src === \"object\") {\n            const cached = cache.get(src);\n            if (cached !== undefined) {\n                return cached;\n            }\n\n            if (Array.isArray(src)) {\n                const result: any[] = [];\n                cache.set(src, result);\n                result.length = src.length;\n                for (let i = 0; i < result.length; ++i) {\n                    result[i] = cloneInternal(src[i]);\n                }\n                return result;\n            } else if (src instanceof Date) {\n                const result = new Date(src.getTime());\n                cache.set(src, result);\n                return result;\n            } else if (src instanceof RegExp) {\n                const result = new RegExp(src.source, src.flags);\n                cache.set(src, result);\n                return result;\n            } else if (src.constructor !== Object) {\n                throw new Error(\"cloneDeep doesn't support objects with custom prototypes\");\n            } else {\n                const result: typeof src = {};\n                cache.set(src, result);\n                for (const key in src) {\n                    if (src.hasOwnProperty(key)) {\n                        result[key] = cloneInternal(src[key]);\n                    }\n                }\n                return result;\n            }\n        } else {\n            // string, number, boolean, undefined and functions are returned as is\n            return src;\n        }\n    }\n\n    const r = cloneInternal(obj);\n    cache.clear();\n    return r;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Get first defined value.\n *\n * Specialized \"replacement\" for `a || b || c` used frequently to get value from various sources\n * (defaults, configs  constants).\n * In contrast to `||`, this function provides proper typing for usual use cases (constant as last\n * argument) and correct treatment of `null` and `undefined`.\n *\n * If last parameter is \"defined\" then return type is `T`, otherwise return type is `T | undefined`.\n *\n * Usage example:\n *\n *     interface Config {\n *         x?: number;\n *     }\n *     const someConfig: Config = {};\n *     const val: number | undefined = undefined;\n *     const DEFAULT = 5;\n *     const x = getOptionValue(val, someConfig.x, DEFAULT);\n *         // typeof x === 'number' because DEFAULT is defined\n *     const y = getOptionValue(val, someConfig.x);\n *         // typeof y === 'number | undefined' because someConfig.x is possibly undefined\n */\n// specialized overloads with last param defined params overload\nexport function getOptionValue<T>(a: T): T;\nexport function getOptionValue<T>(a: T | undefined, b: T): T;\nexport function getOptionValue<T>(a: T | undefined, b: T | undefined, c: T): T;\nexport function getOptionValue<T>(a: T | undefined, b: T | undefined, c: T | undefined, d: T): T;\nexport function getOptionValue<T>(...values: Array<T | undefined>): T | undefined;\n\nexport function getOptionValue<T>(...values: Array<T | undefined>): T | undefined {\n    for (const candidate of values) {\n        if (candidate !== undefined && candidate !== null) {\n            return candidate;\n        }\n    }\n    return undefined;\n}\n\n/**\n * Merge options into existing parameters object.\n *\n * Convenience helper with _similar_ semantics as:\n *\n *     const finalParams1 = { ...defaults, ... options };\n *     const finalParams2 = Object.assign({}, defaults, options);\n *\n * This function doesn't copy _extra_ properties of `options` that doesn't exist in `defaults`.\n * `defaults` is used as _parameters_ template.\n *\n * This doc uses following notion of `option` and `parameter` terms:\n * * `parameter` is a variable, or 'almost constant' of procedure/function/algorith/object\n *    * `parameter` usually have sensible and usually used default\n *    * `parameter` is always defined (no `undefined`, `null` or `?` in type)\n *    * `parameter` can be overriden by specyfying `option` with same name\n * * `option` means value that may be passed optionally, overrides `parameter` value with same name\n *\n * Usage:\n *\n *     interface FooParams {\n *         useTextures: boolean;\n *         opacity: number;\n *     }\n *\n *     const FOO_DEFAULTS: FooParams = {\n *         useTextures: true,\n *         opacity: 0.8\n *     };\n *\n *     type FooOptions = Partial<FooParams>;\n *\n *     function doSomething(options: FooOptions) {\n *         const params = mergeWithOptions(FOO_DEFAULTS, options);\n *             // typeof params === FooParams\n *             // params.opacity = 0.5\n *             // params.useTextures = true\n *             // params.someOtherOptionFromOtherApi is not defined\n *     }\n *     const opt = {opacity: 0.5, someOtherOptionFromOtherApi: 'aaa'};\n *     doSomething(opt);\n *\n * Rationale:\n *   * both `Object.assign` and spread operator copy extra options\n *   * `Object.assign` & `spread operator` may copy `undefined` and `null`s if they really exist\n *     in options object\n *\n * @param parameters parmeters template object holding all expected parameters\n * @param options options object\n * @returns new object with `parameters` overriden by values from `options`\n */\nexport function mergeWithOptions<T extends object>(parameters: T, options?: Partial<T>): T {\n    // NOTE: `as object` needed due to TypeScript bug:\n    //       https://github.com/Microsoft/TypeScript/issues/14409\n    // tslint:disable-next-line:no-object-literal-type-assertion\n    const result = { ...(parameters as object) } as T;\n    if (options === undefined || options === null) {\n        return result;\n    }\n    for (const prop in parameters) {\n        if (parameters.hasOwnProperty(prop)) {\n            const optionValue = options[prop];\n            if (optionValue !== undefined && optionValue !== null) {\n                result[prop] = optionValue as any;\n            }\n        }\n    }\n    return result;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Resolve URI of referenced object w.r.t parent URI.\n *\n * Resolves `childUri` as it would be loaded from location specified by `parentUri`.\n *\n * If `childUri` is absolute, then it is returned unchanged.\n * If `childUri` is origin-absolute path, then only origin path is taken from `parentUri`.\n *\n * See [[baseUri]] for reference how base URL of `parentUri` is determined.\n *\n * Examples:\n *\n *     // normal case, child is sibling\n *     https://foo.com/themes/day.json + images/foo.png -> https://foo.com/themes/images/foo.png\n *\n *     // parent is \"folder\", so child is just located in this folder\n *     https://foo.com/themes/ + images/foo.png -> https://foo.com/themes/images/foo.png\n *\n *     // parent looks like leaf, so last component is stripped\n *     https://foo.com/themes + images/foo.png -> https://foo.com/images/foo.png\n *\n *     // origin-absolute URL, takes only origin from parent\n *     https://foo.com/themes/day.json + /fonts/foo.json -> https://foo.com/fonts/foo.json\n *\n * @param parentUri URI of parent resource\n * @param childUri URI of child as referenced from parent resource\n * @return `childUrl` as if anchored in location of `parentUrl`\n */\nexport function resolveReferenceUri(parentUri: string | undefined, childUri: string): string {\n    if (absoluteUrlWithOriginRe.test(childUri)) {\n        return childUri;\n    } else if (childUri.startsWith(\"/\")) {\n        const origin = getUrlOrigin(parentUri);\n        return origin + childUri;\n    } else {\n        if (childUri.startsWith(\"./\")) {\n            childUri = childUri.substr(2);\n        }\n        const parentBaseUrl = baseUrl(parentUri);\n        return parentBaseUrl + childUri;\n    }\n}\n\nconst absoluteUrlWithOriginRe = new RegExp(\"^(?:[a-z]+:)?//\", \"i\");\n\n/**\n * Returns base URL of given resource URL.\n *\n * `Url` with trailing slash are considered genuine 'locations', they are returned as is, however if\n * `url` ends with name component it is treated as \"leaf\", so last path component is removed.\n *\n * Standalone files (without any folder structure) are considered relative to `./`.\n *\n * Examples:\n * ```\n *     https://foo.com/themes/a.json -> https://foo.com/themes/\n *     https://foo.com/themes/ -> https://foo.com/themes/\n *     https://foo.com/themes -> https://foo.com/ // note, themes is treated as leaf\n *     themes/day.json -> themes/\n *     themes -> ./\n * ```\n */\nexport function baseUrl(url: string | undefined) {\n    if (url === undefined) {\n        return \"./\";\n    }\n    let idx = url.indexOf(\"#\");\n    if (idx !== -1) {\n        url = url.slice(0, idx);\n    }\n    idx = url.indexOf(\"?\");\n    if (idx !== -1) {\n        url = url.slice(0, idx);\n    }\n    idx = url.lastIndexOf(\"/\");\n    if (idx === -1) {\n        return \"./\";\n    } else {\n        return url.substring(0, idx + 1);\n    }\n}\n\n/**\n * Get `origin` part of URL.\n *\n * @example\n *    https://example.com/foo -> https://example.com\n *    //example.com:8080/ -> //example.com:8080\n *    file:///etc/hosts ->\n *\n * @param url input URL\n * @return origin of given URL\n */\nexport function getUrlOrigin(url: string | undefined): string {\n    if (url === undefined) {\n        return \"\";\n    }\n    const parsed = getUrlHostAndProtocol(url);\n    if (parsed.protocol === \"file:\") {\n        return \"file://\";\n    } else if (parsed.host && parsed.protocol) {\n        return parsed.protocol + \"//\" + parsed.host;\n    } else if (parsed.host) {\n        return \"//\" + parsed.host;\n    } else if (parsed.protocol) {\n        return parsed.protocol + \"//\";\n    } else {\n        return \"\";\n    }\n}\n\n/**\n * Parse `host` and `protocol` part from URL.\n */\nexport function getUrlHostAndProtocol(\n    url: string\n): {\n    protocol: string;\n    host: string;\n} {\n    const urlOriginRe = new RegExp(/^(?:([a-z]+:))?\\/\\/([^\\/]*)/, \"i\");\n\n    const match = url.match(urlOriginRe);\n    if (!match) {\n        throw new Error(`getUrlHostAndProtocol: unable to parse URL '${url}'`);\n    }\n    return {\n        protocol: match[1],\n        host: match[2]\n    };\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { resolveReferenceUri } from \"./UrlUtils\";\n\n/**\n * Custom, app-specific URI resolver interface.\n */\nexport interface UriResolver {\n    /**\n     * Attempt to resolve `URI` to `URL`.\n     *\n     * If given resolver doesn't know about this specific kind of `URI`, it should return string as\n     * received.\n     *\n     * @param input `URI`\n     * @returns actual `URL` if this handler knows how locate given `uri` or original `uri`\n     */\n    resolveUri(uri: string): string;\n}\n\nexport interface PrefixUriResolverDefinition {\n    [prefix: string]: string;\n}\n\n/**\n * Basic, import-map like [[UriResolver]].\n *\n * Resolves `uris` basing on exact or prefix match of `key` from `definitions`.\n *\n * In definitions, `key` is matched against input uri with following strategy:\n *  - `key` without trailing `/` -> `key` and input `uri` must be identical\n *  - `key` with trailing `/`, -> `key` is treated as \"package prefix\", so `uri` must start with\n *    `key`\n *\n * Example:\n * ```\n * {\n *     \"local://poiMasterList\": \"/assets/poiMasterList.json\"\n *        // will match only 'local://poiMasterList' and resolve `/assets/poiMasterList.json`\n *     \"local://icons/\": \"/assets/icons/\"\n *        // will match only 'local://icons/ANYPATH' (and similar) and resolve to\n *        // `/assets/icons/ANYPATH\n * }\n * ```\n * Inspired by [`WICG` import maps proposal](https://github.com/WICG/import-maps#the-import-map).\n */\nexport class PrefixMapUriResolver implements UriResolver {\n    constructor(readonly definitions: PrefixUriResolverDefinition) {}\n\n    resolveUri(uri: string) {\n        return Object.keys(this.definitions).reduce((r, key) => {\n            if (key.endsWith(\"/\") && r.startsWith(key)) {\n                const newPrefix = this.definitions[key];\n                return newPrefix + r.substr(key.length);\n            } else if (r === key) {\n                return this.definitions[key];\n            }\n            return r;\n        }, uri);\n    }\n}\n\n/**\n * [UriResolver] that resolve relative `uri`s against to parent resource `uri`.\n */\nexport class RelativeUriResolver implements UriResolver {\n    constructor(readonly parentUri: string) {}\n\n    resolveUri(uri: string) {\n        return resolveReferenceUri(this.parentUri, uri);\n    }\n}\n\n/**\n * Compose URI resolvers.\n *\n * Creates new [[UriResolver]] that applies resolvers in orders or arguments.\n *\n * Example:\n *\n *     const themeUrl = ...; // url of parent object\n *     const childUrlResolver = composeUrlResolvers(\n *           new RelativeUriResolver(themeUrl),\n *           defaultUrlResolver\n *     );\n */\nexport function composeUriResolvers(...resolvers: Array<UriResolver | undefined>): UriResolver {\n    return {\n        resolveUri(originalUrl: string) {\n            return resolvers.reduce((url, resolver) => {\n                if (resolver !== undefined) {\n                    return resolver.resolveUri(url);\n                } else {\n                    return url;\n                }\n            }, originalUrl);\n        }\n    };\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport { baseUrl } from \"./UrlUtils\";\n\n/**\n * Get base URL for from where relative URLs will be loaded.\n *\n * * In browser, it resolves to `baseUrl(location.href)` i.e document's base URL\n * (see: https://www.w3.org/TR/WD-html40-970917/htmlweb.html#h-5.1.2).\n *\n * * In node, it resolves to `file://${process.cwd()}`.\n */\nexport function getAppBaseUrl() {\n    if (typeof window === \"undefined\") {\n        if (appBaseUrl !== undefined) {\n            return appBaseUrl;\n        } else {\n            throw new Error(\n                \"getAppBaseUrl: no appBaseUrl defined in worker context, use setAppBaseUrl\"\n            );\n        }\n    }\n    return baseUrl(window.location.href);\n}\n\nlet appBaseUrl: string | undefined;\nexport function setAppBaseUrl(v: string) {\n    appBaseUrl = v;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n/**\n * Chains two functions for further assigning as one wrapped callback function\n */\nexport function chainCallbacks<T extends (this: unknown, ...args: any[]) => any>(\n    f1: T | null | undefined,\n    f2: T\n): T {\n    return function(this: any, ...args: any[]): ReturnType<T> {\n        if (f1) {\n            f1.apply(this, args);\n        }\n        return f2.apply(this, args);\n    } as T;\n}\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\nexport * from \"./lib/GroupedPriorityList\";\nexport * from \"./lib/Logger\";\nexport * from \"./lib/Math2D\";\nexport * from \"./lib/MathUtils\";\nexport * from \"./lib/Mixins\";\nexport * from \"./lib/assert\";\nexport * from \"./lib/CachedResource\";\nexport * from \"./lib/ContextLogger\";\nexport * from \"./lib/PerformanceTimer\";\nexport * from \"./lib/ObjectUtils\";\nexport * from \"./lib/OptionsUtils\";\nexport * from \"./lib/UriResolver\";\nexport * from \"./lib/UrlUtils\";\nexport * from \"./lib/UrlPlatformUtils\";\nexport * from \"./lib/Functions\";\n","/*\n * Copyright (C) 2017-2019 HERE Europe B.V.\n * Licensed under Apache 2.0, see full license in LICENSE\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// tslint:disable-next-line:no-implicit-dependencies\nimport \"./css/index.css\";\n\nconst s3Base = \"https://www.harp.gl/docs/\";\n\n//Update initial links to s3 base\ndocument.querySelector<HTMLAnchorElement>(\".examples-link\")!.href = s3Base + \"master/examples/\";\ndocument.querySelector<HTMLAnchorElement>(\".docs-link\")!.href = s3Base + \"master/doc/\";\ndocument.querySelector<HTMLAnchorElement>(\"#docs-nav\")!.href = s3Base + \"master/doc/\";\ndocument.querySelector<HTMLAnchorElement>(\"#examples-nav\")!.href = s3Base + \"master/examples/\";\ndocument.querySelector<HTMLAnchorElement>(\"#docs-nav-mobile\")!.href = s3Base + \"master/doc/\";\n\n//Update year\n(document.getElementById(\"year\") as HTMLDivElement).innerText = `${new Date().getFullYear()}`;\n\nconst releases = [\n    {\n        date: \"latest\",\n        hash: \"master\",\n        version: \"latest-dev\"\n    }\n];\nconst dropdown = document.querySelector(\"select[name=versions]\") as HTMLSelectElement;\n\nfetch(\"./releases.json\")\n    .then(res => res.json())\n    .then(res => {\n        releases.push(...res);\n        releases.forEach(release => {\n            const option = document.createElement(\"option\");\n            option.innerText = release.version;\n            dropdown.appendChild(option);\n        });\n\n        dropdown.onchange = () => {\n            const selected = dropdown.querySelector<HTMLOptionElement>(\"option:checked\")!;\n            const release = releases.find(x => x.version === selected.innerText);\n            if (!release) {\n                return;\n            }\n            const hash = release.hash;\n            const version = release.version;\n\n            //Update examples button and link\n            document.querySelector<HTMLAnchorElement>(\".examples-link\")!.href =\n                s3Base + hash + \"/examples/\";\n            document.querySelector<HTMLAnchorElement>(\".examples-link\")!.innerText =\n                \"Examples\" + (hash !== \"master\" ? ` (${version})` : \"\");\n\n            //Update docs button and link\n            document.querySelector<HTMLAnchorElement>(\".docs-link\")!.href = s3Base + hash + \"/doc/\";\n            document.querySelector<HTMLAnchorElement>(\".docs-link\")!.innerText =\n                \"Documentation\" + (hash !== \"master\" ? ` (${version})` : \"\");\n        };\n    })\n    .catch(() => {\n        //In case network request to build information fails, add master link\n        const option = document.createElement(\"option\");\n        option.innerText = \"master\";\n        dropdown.appendChild(option);\n    });\n\nimport { createMapViewInWorker } from \"./WorkerMapViewFacade\";\n\nasync function createMapInt(canvas: HTMLCanvasElement) {\n    if (typeof canvas.transferControlToOffscreen === \"function\") {\n        console.log(\"#starting mapview in worker\");\n        return createMapViewInWorker(canvas);\n    } else {\n        console.log(\"#starting mapview in main thread\");\n        return import(/* webpackChunkName: \"mapview-main\" */ \"./map\").then(({ createMap }) => {\n            return createMap({ canvas });\n        });\n    }\n}\n\nasync function main() {\n    const theCanvas = document.getElementById(\"map\") as HTMLCanvasElement;\n    const map = await createMapInt(theCanvas);\n\n    map.resize(window.innerWidth, 500);\n    window.addEventListener(\"resize\", () => map.resize(window.innerWidth, 500));\n\n    map.addEventListener(\"frame-complete\", () => {\n        // tslint:disable-next-line:no-console\n        console.log(\"#FirstFrameComplete, showing canvas\");\n        theCanvas.style.opacity = \"1\";\n    });\n}\n\nmain();\n","import { GeoCoordinatesLike } from \"@here/harp-geoutils\";\nimport { getAppBaseUrl } from \"@here/harp-utils\";\nimport { EventEmitter } from \"events\";\n\nexport async function createMapViewInWorker(canvas: HTMLCanvasElement) {\n    const offscreen = canvas.transferControlToOffscreen();\n    const worker = new Worker(\"mapview-worker.bundle.js\");\n\n    worker.addEventListener(\"error\", (event: ErrorEvent) => {\n        console.log(\"MapViewWorkerFacade#error!\", event);\n    });\n\n    worker.postMessage(\n        {\n            type: \"mapview-worker-init\",\n            canvas: offscreen,\n            baseUrl: getAppBaseUrl(),\n            clientHeight: canvas.clientHeight,\n            clientWidth: canvas.clientWidth,\n            pixelRatio: window.devicePixelRatio\n        },\n        [(offscreen as unknown) as Transferable]\n    );\n\n    const eventHandler = new EventEmitter();\n    worker.addEventListener(\"message\", (event: MessageEvent) => {\n        const message = event.data;\n        if (message.type === \"event\") {\n            eventHandler.emit(message.eventName, message.data);\n        }\n    });\n\n    return {\n        resize(width: number, height: number) {\n            worker.postMessage({ type: \"resize\", width, height });\n        },\n        addEventListener(name: string, listener: () => void) {\n            if (eventHandler.listenerCount(name) === 0) {\n                worker.postMessage({ type: \"addEventListener\", name });\n            }\n\n            eventHandler.on(name, listener);\n        },\n        // removeEventListener() {},\n        lookAt(geoPos: GeoCoordinatesLike, distance: number, tiltDeg: number, headingDeg?: number) {\n            worker.postMessage({\n                type: \"lookAt\",\n                lat: geoPos.latitude,\n                long: geoPos.longitude,\n                distance,\n                tiltDeg,\n                headingDeg\n            });\n        },\n        beginAnimation() {\n            worker.postMessage({ type: \"beginAnimation\" });\n        }\n    };\n}\n"],"sourceRoot":""}